# Cortex-M23 レジスタ仕様

## 基本レジスタセット
Cortex-M23プロセッサは以下の32ビットレジスタを実装しています：

### 汎用レジスタ (R0-R12)
- R0-R12: データ操作用の汎用レジスタ
- 各レジスタは32ビット幅

### スタックポインタ (R13)
- R13はスタックポインタ(SP)として使用
- ThreadモードではCONTROLレジスタにより以下のいずれかを使用:
  - メインスタックポインタ (MSP)
  - プロセススタックポインタ (PSP)

#### セキュリティ拡張実装時:
- MSP_NS: 非セキュア状態用
- MSP_S: セキュア状態用
- PSP_NS: 非セキュア状態用
- PSP_S: セキュア状態用

#### セキュリティ拡張未実装時:
- 単一のMSPレジスタ
- 単一のPSPレジスタ

### リンクレジスタ (R14)
- R14はリンクレジスタ(LR)として使用
- サブルーチン、関数呼び出し、例外からの復帰情報を格納

### プログラムカウンタ (R15)
- R15はプログラムカウンタ(PC)として使用
- 現在の実行アドレスを保持

## 特殊レジスタ

### プログラムステータスレジスタ (PSR)
以下の3つのレジスタの組み合わせ:
- APSR (Application Program Status Register)
- IPSR (Interrupt Program Status Register)
- EPSR (Execution Program Status Register)

### PRIMASKレジスタ
- 設定可能な優先度を持つ全ての例外の有効化を制御

#### セキュリティ拡張実装時:
- PRIMASK_NS: 非セキュア状態用
- PRIMASK_S: セキュア状態用

#### セキュリティ拡張未実装時:
- 単一のPRIMASKレジスタ

### CONTROLレジスタ
- Threadモード時のスタック選択を制御
- 必要に応じてコード実行権限レベルも制御

#### セキュリティ拡張実装時:
- CONTROL_NS: 非セキュア状態用
- CONTROL_S: セキュア状態用

#### セキュリティ拡張未実装時:
- 単一のCONTROLレジスタ

### スタック制限レジスタ (セキュリティ拡張実装時のみ)
- MSPLIM_S: MSP_Sレジスタの下限値を制御
- PSPLIM_S: PSP_Sレジスタの下限値を制御

## 注意事項
- 全てのレジスタは32ビット幅
- スタック制限を下回るPUSH命令は実行されない
- スタック制限を下回る例外スタッキングは、制限値以上のアドレスに対してのみ部分的に書き込まれる可能性がある
